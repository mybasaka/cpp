# C++核心编程

---

本阶段主要针对C++==面向对象技术==进行解释，探讨C+编程技术中的核心和精髓

## 1 内存分区模型

C++程序在执行时，将内存大方向划分为4个区域

* 代码区：存放函数体的二进制代码，由操作系统进行管理的
* 全局区：存放全局变量和静态变量以及常量
* 栈区：由编译器自动分配释放，存放函数的参数值，局部变量，*局部常量*
* 堆区：由程序员分配和释放，若程序员不释放，程序结束时由操作系统回收

**程序四区的意义：**

不同区域存放的数据，赋予不同的生命周期，给我们更大的灵活编程

### 1.1 程序运行前

在程序编译后，生成了exe可执行程序，未执行程序前分为两个区域

**代码区：**

​		存放CPU执行的机器指令

​		代码区是**共享**的，共享的目的是对于频繁执行的程序，只需要在内存中有一份代码即可

​		代码区是**只读**的，只读的原因是防止程序意外地修改了它的指令。

**全局区：**

​		全局变量和静态变量存放在此处

​		全局区包含了常量区、字符串常量和其他常量也存放在此

​		==该区域的数据在程序结束之后由操作系统释放==

### 1.2 程序运行后

**栈区：**

​		由编译器自动分配释放、存放函数的参数值、局部变量等

​		注意事项：不要返回局部变量的地址，栈区开辟的数据由编译器自动释放

**堆区：**

​		由程序员分配释放，若程序员不释放，程序结束时由操作系统回收

​		在C++中主要利用new在堆区中开辟数据

### 1.3 new操作符

**语法：** `new 数据类型`利用new创建数据，会返回该数据对应类型的指针

`int * p = new int(10)`指针本身是一个局部变量，指针是在栈上的，但是new出来的内容是堆上的内容，直到delete操作或者程序结束。

## 2 引用

### 2.1 引用的基本使用

**作用：**给变量起别名

**语法：**`数据类型 &别名 = 原名`

### 2.2 引用的注意事项

* 引用必须初始化
* 引用在初始化之后不可以被改变

### 2.3 引用做函数的参数

**作用：**函数传参时，可以利用引用的技术让形参修饰实参

**优点：**可以简化指针修改实参

**示例：**

```c++
//1.值传递
void myswap01(int a,int b){
    int temp = a;
    a = b;
    b = temp;
}
void myswap02(int* a,int* b){
    int temp = *a;
    *a = *b;
    *b = temp;
}
void myswap03(int &a,int &b){
    int temp = a;
    a = b;
    b = temp;
}
```

### 2.4 引用做函数的返回值

**作用:**引用是可以作为函数的返回值存在的

**注意：**不要返回局部变量引用

```c++
int& test01(){
    int a = 10;
    return a;
}//会出现问题，内存已经被释放
```

**用法：**函数调用可以作为作为左值

```c++
int& test02(){
    static int a = 10;
    return a;
}
test02()=1000; //相当于赋值操作
```

### 2.5 引用的本质

**本质：**引用的本质在C++内部实现是一个指针常量。

`int& ref = a`相当于`int* const ref = a`指针的指向不能修改，这也就证明了为什么初始化之后不能够修改指向，同时也可以证明为什么可以作为左值，因为其指向的空间的值是可以被修改的。

其操作是由编译器帮助完成的。

### 2.6 常量引用

**作用：**常量引用主要用来修饰形参，防止误操作

在函数形参列表中，可以加const修饰形参，防止形参改变实参

```c++
void showvalue(const int& v){
    v+=10;//注意，这一行在实际执行中报错，因为引用的是一个常量，不能被修改，这样就可以解决引用在某些莫名其妙的状况下被修改的问题。
    cout<<v<<endl;
}
```

## 3 函数高级

### 3.1 函数默认参数

在C++中，函数的形参列表中的形参是可以由默认值的

语法：`返回值类型 函数名 (形参 = 默认值){}`

如果我们自己传入参数，就用用户自己的数据，如果没有，就是用默认的数值。

注意：

1. 如果某个位置已经有了默认参数，那么从这个位置开始，从左向右都必须有默认值
2. 如果函数声明有默认参数，那么函数实现就不能有默认参数。

### 3.2 函数占位参数

C++中函数的形参列表中可以有展位参数，用来展位，调用函数时必须填补该位置

**语法：**`返回值类型 函数名(数据类型){}`

在现阶段函数的展位参数存在意义不大，但是后面的课程中会使用到该技术

展位参数也可以有默认参数。

### 3.3 函数重载

#### 3.3.1 函数重载概述

**作用：**函数名可以相同，提高复用性

**函数重载满足条件：**

* 同一个作用域下
* 函数名称相同
* 函数参数类型不同 或者 个数不同 或者 顺序不同

注意：==函数的返回值不可以做为函数重载的条件==

#### 3.3.2 函数重载注意事项

两个坑：

* 引用作为函数重载的条件==(int a 和 const int a可以作为重载条件)==
* 函数重载碰到函数默认参数(默认参数出现二义性，出错，尽量避免)

## 4 类和对象

C++面向对象的三大特性为：==封装、继承、多态==

C++认为==万事万物皆为对象==，对象上有其属性和行为

具有相同性质的对象，我们可以抽象称为==类==

### 4.1 封装

### 4.2 对象的初始化和清理

### 4.3 C++对象模型和this指针

### 4.4 友元

### 4.5 运算符重载

### 4.6 继承

### 4.7 多态

## 5 文件操作
